language: node_js
node_js:
- '8'
sudo: required
services:
- docker
if: branch IN (master, develop)
install:
- npm install
- npm install -g typescript
script:
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker build -t drivereu/kafka-replay-service:$TRAVIS_BRANCH-latest .
- if [ $TRAVIS_BRANCH == "master" ]; then docker tag drivereu/kafka-replay-service:$TRAVIS_BRANCH-latest
  drivereu/kafka-replay-service:latest; fi
- if [ ! -z $TRAVIS_TAG ]; then docker tag drivereu/kafka-replay-service:$TRAVIS_BRANCH-latest
  drivereu/kafka-replay-service:$TRAVIS_TAG; fi
- docker push drivereu/kafka-replay-service
env:
  global:
  - secure: YjsQ4HhqnPk0zB/cA6GD4wdBk4DGUEOlKkuwkZP6JsOyS/rhZAgMeQbQvZ7QFkTCZ6t7AFjlTNgNuLRdr/Md2MEH2V6XMhSNuqqP0KPhWqdkvwDqK4Q2buhqfB4dcMyqmQO2mnqWFw60CTZ8YejrnG3ejxQnR1npP9u9O/cFvEL1QEQTlV50uMXoSi7GIu17VXldZ0siQi5AB2PIYoTxvILexx/8MTChJ+BePmyYAYbPUyZ6vQ8tyazI7ggrw18GANuTR+iMEpYBeBpR3nJQslhsDLnney2oIl1jjq9sZVXlINfiQUt/rkORTd6lh8u0p4Zm6kv0tHxc3SyYKPsc7dXyqVp09GoAropB1NduzN4zIOwKx7r2YDxuWo98+PFlUYKe8b/K/ty8+vNCB1tKzMZbk1Vacg4XVp+k+PiiEsgs4aqGOUE6kEevceE6AwgLoo/tCqm0otFX2Xo5ksQCccCWSFi9BRp8wx/hZYiJDGk0HaSmDRfl7Hf4t3EFJHdmWhKCkLYwFUwZwGM8GoRxII6BMQy0uCVSZLP7U+VKaitHtUPKRyRJE/omFyotg/G7qgAGZewCkvW/4fXjVm9OAFp+tk+D9I8OjYui5GhUXwFs2K6fFacwnYXrq1Fh/zGV2wrK6BRaOdKYt7x4RWRch8qPJSeXajQvoHxr7gyVoVk=
  - secure: Jutpxc6vw79ml03dPp0eciOh31o/1dB4hI1s6iZwxw8RcHTGHzeMJ2fTbSemoYsVfmGqhEmMkLNCPwAL1uieHH6EgkcsxkD/oj13PiWShhFJnnsq4vp/vQrLOkAWtDDO5tbeASKKoM2sCvGG6/ou27EJPgyGvYcowNMraVXQhueOfEq1hwC3eBphs+o4GmYTbw5djxVMAxn6Fke2yO3jFW2KR+TUa74tVHZ+1anPOZN2gScIN0e2MzWylkZKGRWOsstLwFShLEfmbWVyYrXft6yJRXVqJPj0xAkAT1oYiiyaNvtev90PPOhfEfxs3ZVvoqsJ8O7waCjbDfnHZvr8kMfbomYoQFAnXbad3ldXEWHIAUKg1aXr67JW/9zqR31ED5c69OZUwRI6KvWVmPCY00gMlKtLvfsU/pthLyBywT1nsC+86RAqArSYIyffPpvqgdWAxeqQiJMlqZL+jk5z1VPqCpo4mK2V78XkZev+PT2Y0+WzD9h60STkV8sMLYIXRngF7c8pVKGP94DfxVqNdGOR6tMJUgjc7ToQD2l833thfDtXX50E7ditJQOXsOcGUsbZeZ5Y9kiiFObRz0gh5uvW3IAEnrRI4cX0uS1m5cL9Um8/CXS38FK8rBWWJnvD1umDzgEqfMUPpDG1e9PiDLra6QcZokurN2+QHfdmNqs=
